{% extends 'User/Head_User.html' %}
{% block content %}

<!-- Breakdown Assist Booking -->
<div class="container-fluid bg-secondary booking my-5 wow fadeInUp" data-wow-delay="0.1s">
  <div class="container">
    <div class="row gx-5">

      <!-- LEFT INFO PANEL -->
      <div class="col-lg-6 py-5">
        <div class="py-5">
          <span class="badge bg-danger mb-3 px-3 py-2">Emergency Support</span>

          <h1 class="text-white mb-4">Breakdown Assist Booking</h1>
          <p class="text-white mb-0 fs-5">
            Facing a vehicle breakdown? Select your vehicle, service type, and describe the issue.
            Our service center will assist you immediately.
          </p>

          <div class="mt-4 p-4 bg-primary bg-opacity-25 rounded">
            <h5 class="text-white mb-2">Before you continue</h5>
            <ul class="text-white-50 mb-0 ps-3">
              <li>Select the affected vehicle</li>
              <li>Choose the required breakdown service</li>
              <li>Describe the issue clearly</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- RIGHT FORM PANEL -->
      <div class="col-lg-6">
        <div class="bg-primary h-100 d-flex flex-column justify-content-center text-center p-5 wow zoomIn" data-wow-delay="0.6s">
          <h1 class="text-white mb-4">Request Breakdown Assist</h1>

          <form method="post">
            {% csrf_token %}

            <div class="row g-3">

              <!-- VEHICLE -->
              <div class="col-12">
                <label class="text-white-50 mb-2 fw-semibold d-block text-start">
                  Select Vehicle
                </label>
                <select
                  name="sel_vehicle"
                  class="form-select border-0"
                  style="height:55px;"
                  required
                >
                  <option value="">Choose your vehicle</option>
                  {% for i in vehicle_data %}
                    <option value="{{ i.id }}">
                      {{ i.model.brand.brand_name }} {{ i.model.model_name }} - {{ i.vehicle_number }}
                    </option>
                  {% endfor %}
                </select>
              </div>

              <!-- BREAKDOWN SERVICE TYPE -->
              <div class="col-12">
                <label class="text-white-50 mb-2 fw-semibold d-block text-start">
                  Breakdown Service
                </label>
                <select
                  name="sel_service"
                  class="form-select border-0"
                  style="height:55px;"
                  required
                >
                  <option value="">Select breakdown service</option>
                  {% for s in breakdown_services %}
                    <option value="{{ s.id }}">
                      {{ s.servicetype.servicetype_name }} – ₹{{ s.base_amount }}
                    </option>
                  {% endfor %}
                </select>
              </div>

              <!-- COMPLAINT -->
              <div class="col-12">
                <label class="text-white-50 mb-2 fw-semibold d-block text-start">
                  Breakdown Description
                </label>
                <textarea
                  name="txt_complaint"
                  class="form-control border-0"
                  rows="4"
                  placeholder="Example: Engine not starting, tyre burst, battery dead..."
                  required
                ></textarea>
              </div>

              <!-- SUBMIT -->
              <div class="col-12">
                <button class="btn btn-warning w-100 py-3 fw-bold" type="submit">
                  Book Breakdown Assist
                </button>
              </div>

            </div>
          </form>

        </div>
      </div>

    </div>
  </div>
</div>
<!-- End Breakdown Assist Booking -->

{% if msg %}
<script>
  alert("{{ msg }}");
  window.location = "{% url 'User:homepage' %}";
</script>
{% endif %}

{% endblock content %}
